---
export interface INavbar {
	arrowBack: boolean;
	share: boolean;
}

const { arrowBack, share } = Astro.props as INavbar;
---

<script>
	document.querySelector('#share')?.addEventListener('click', async () => {
		const shareData = {
			title: document.title,
			text: document.title,
			url: window.location.href,
		};
		if (navigator.share) {
			try {
				await navigator.share(shareData);
			} catch (err) {
				console.log(err);
			}
		} else {
			navigator.clipboard.writeText(window.location.href);
			const alert = document.querySelector('#copyAlert');
			alert?.classList.remove('hidden');
			setTimeout(function () {
				alert?.classList.add('hidden');
			}, 2500);
		}
	});
</script>

<div
	class='navbar mx-auto fixed bottom-0 bg-base-100 z-20 px-4 shadow-2xl'
	style='padding-bottom: calc(8px + env(safe-area-inset-bottom));'
>
	<div class='flex-none w-12'>
		{arrowBack && (
			<a class="flex btn btn-square btn-ghost" href="javascript:history.back()">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					class="h-6 w-6"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
					stroke-width="2"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M15 19l-7-7 7-7"
					/>
				</svg>
			</a>
		)}
	</div>
	<div class='flex-1 justify-center'>
		<a href='#'>
			<img
				class='mx-auto h-12'
				src='/assets/logo.png'
				alt='logo'
				width='87'
				height='48'
			/>
		</a>
	</div>
	<div class='flex-none'>
		{share ? (
			<Fragment>
				<button id="share" class="btn btn-square btn-ghost">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						class="h-6 w-6"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
						stroke-width="2"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"
						/>
					</svg>
				</button>
				<div
					id="copyAlert"
					class="alert alert-success absolute left-4 right-4 w-auto bottom-4 shadow-lg hidden"
				>
					<div>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="stroke-current flex-shrink-0 h-6 w-6"
							fill="none"
							viewBox="0 0 24 24"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
							/>
						</svg>
						<span>Link erfolgreich kopiert!</span>
					</div>
				</div>
			</Fragment>
		) : (
			<label for="menu" class="btn btn-square btn-ghost btn-modal">
				<svg
					xmlns="http://www.w3.org/2000/svg"
					class="h-6 w-6"
					fill="none"
					viewBox="0 0 24 24"
					stroke="currentColor"
					stroke-width="2"
				>
					<path
						stroke-linecap="round"
						stroke-linejoin="round"
						d="M4 6h16M4 12h16M4 18h16"
					/>
				</svg>
			</label>
		)}
	</div>
</div>
