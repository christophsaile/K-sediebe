---
import { ViewTransitions } from 'astro:transitions';
import Background from '@components/astro/Background.astro';
import { SITE } from 'src/config';
export interface IBaseLayout {
	title: string;
	permalink: string;
	transition: boolean;
}

const { title, permalink, transition } = Astro.props as IBaseLayout;
const completeTitle = SITE.title + title;
const description = SITE.description;
---

<html lang='de' data-theme='kaesediebe'>
	<head>
		<!-- Global Metadata -->
		<meta charset='utf-8' />
		<meta
			name='viewport'
			content='width=device-width, initial-scale=1.0, viewport-fit=cover'
		/>
		<link rel='icon' type='image/x-icon' href='/favicon.ico' />
		<meta name='color-scheme' content='light dark' />
		<meta name='theme-color' content='#f3f4f7' />

		<base href='/' />

		<link rel='manifest' href='/manifest.json' />
		<link rel='apple-touch-icon' href='icons/apple-icon-180.png' />

		<meta name='apple-mobile-web-app-capable' content='yes' />
		<meta name='apple-mobile-web-app-title' content='KÃ¤sediebe' />
		<meta name='apple-mobile-web-app-status-bar-style' content='default' />

		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-2048-2732.jpg'
			media='(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-2732-2048.jpg'
			media='(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1668-2388.jpg'
			media='(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-2388-1668.jpg'
			media='(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1536-2048.jpg'
			media='(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-2048-1536.jpg'
			media='(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1668-2224.jpg'
			media='(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-2224-1668.jpg'
			media='(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1620-2160.jpg'
			media='(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-2160-1620.jpg'
			media='(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1284-2778.jpg'
			media='(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-2778-1284.jpg'
			media='(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1170-2532.jpg'
			media='(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-2532-1170.jpg'
			media='(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1125-2436.jpg'
			media='(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-2436-1125.jpg'
			media='(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1242-2688.jpg'
			media='(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-2688-1242.jpg'
			media='(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-828-1792.jpg'
			media='(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1792-828.jpg'
			media='(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1242-2208.jpg'
			media='(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-2208-1242.jpg'
			media='(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-750-1334.jpg'
			media='(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1334-750.jpg'
			media='(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-640-1136.jpg'
			media='(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)'
		/>
		<link
			rel='apple-touch-startup-image'
			href='icons/apple-splash-1136-640.jpg'
			media='(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)'
		/>

		<!-- Primary Meta Tags -->
		<title>{completeTitle}</title>
		<meta name='title' content={completeTitle} />
		<meta name='description' content={description} />

		<!-- Open Graph / Facebook -->
		<meta property='og:type' content='website' />
		<meta property='og:url' content={permalink} />
		<meta property='og:title' content={completeTitle} />
		<meta property='og:description' content={description} />
		<meta
			property='og:image'
			content='https://kaese-diebe.netlify.app/assets/logo.png'
		/>

		<!-- Twitter -->
		<meta property='twitter:card' content='summary_large_image' />
		<meta property='twitter:url' content={permalink} />
		<meta property='twitter:title' content={completeTitle} />
		<meta property='twitter:description' content={description} />
		<meta
			property='twitter:image'
			content='https://kaese-diebe.netlify.app/assets/logo.png'
		/>

		<!-- Teams -->
		<meta
			name='msapplication-square70x70logo'
			content='icons/mstile-icon-128.png'
		/>
		<meta
			name='msapplication-square150x150logo'
			content='icons/mstile-icon-270.png'
		/>
		<meta
			name='msapplication-square310x310logo'
			content='icons/mstile-icon-558.png'
		/>
		<meta
			name='msapplication-wide310x150logo'
			content='icons/mstile-icon-558-270.png'
		/>
		<style is:global>
			:focus-visible {
				outline-offset: 2px !important;
				outline: 3px solid rgb(0, 112, 255) !important;
			}

			::selection {
				background: rgb(0, 112, 255);
				color: white;
			}

			html {
				height: -webkit-fill-available;
			}
			body {
				min-height: 100vh;
				/* mobile viewport bug fix */
				min-height: -webkit-fill-available;
				padding-bottom: calc(8px + env(safe-area-inset-bottom));
				background-color: white;
				color: black
			}
		</style>
		{transition && <ViewTransitions fallback='swap' />}
	</head>

	<body>
		<Background />
		<slot></slot>
		<!-- PWA -->
		<script>
			// Don't register the service worker
			// until the page has fully loaded
			import.meta.env.PROD && window.addEventListener('load', () => {
				// Is service worker available?
				if ('serviceWorker' in navigator) {
					navigator.serviceWorker
						.register('/sw.js')
						.then(() => {
							console.log('Service worker registered!');
						})
						.catch((error) => {
							console.warn('Error registering service worker:');
							console.warn(error);
						});
				}
			});

			const style =
				'font-size: 24px;' +
				'color: white;' +
				'text-align: center;' +
				'padding: 10px 15px;' +
				'width: 100%;';
			const text = '%cWith ðŸ§€ made by Chris & Pauline';
			console.log(text, style);
		</script>
	</body>
</html>
